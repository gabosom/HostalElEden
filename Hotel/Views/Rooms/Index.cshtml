@model HotelEden.Models.RoomTypesReservationViewModel

@{
    ViewBag.Title = HotelEden.SpanishResources.SiteRoomsTitle;
}

<div id="page" class="container">
    <h2>@HotelEden.SpanishResources.RoomsTitle</h2>
    @if (ViewBag.IsSearch == null)
    {
        <p>@HotelEden.SpanishResources.RoomsPageDescription</p>
    }
    else
    {
        @String.Format(HotelEden.SpanishResources.RoomsSearchDescription, Model.CheckInDate.ToShortDateString(), Model.CheckOutDate.ToShortDateString())
    }

    <table class="roomList">
        <tr>
            <th colspan="2"></th>
            <th></th>
            <th></th>
        </tr>
        <tr class="roomListItemBreak">
            <td colspan="4">
                <hr />
            </td>
        </tr>

        @foreach (var item in HotelEden.Utils.RoomFactory.GetAllRooms())
        {
            using (Html.BeginForm("Reserve", "Rooms", FormMethod.Get))
            {
                <tr class="roomListItem">
                    <td class="roomThumbColumn">
                        <img src="@Html.DisplayFor(modelItem => item.ImageURL)" />
                    </td>
                    <td class="roomTitleColumn">
                        <h3>@Html.DisplayFor(modelItem => item.Title)</h3>
                        <div>
                            @for (int i = 0; i < item.MaxGuestNo; i++)
                            {
                                <span class="roomOccupant"></span>
                            }
                        </div>
                        <span>@Html.Raw(item.Description)</span>
                        @Html.Raw(HotelEden.SpanishResources.RoomsBasicInfo)

                        @if (ViewBag.IsSearch == null)
                        {
                            @Html.Hidden("CheckInDate", DateTime.Today.AddDays(1).ToShortDateString())
                            @Html.Hidden("CheckOutDate", DateTime.Today.AddDays(2).ToShortDateString())

                        }
                        else
                        {
                            @Html.Hidden("CheckInDate", Model.CheckInDate.ToShortDateString())
                            @Html.Hidden("CheckOutDate", Model.CheckOutDate.ToShortDateString())
                        }
                        @Html.Hidden(item.Keyword + "Count", "1")
                    </td>

                    <td class="priceColumn">
                        USD $@String.Format("{0:0.00}", item.Rate)
                        <div class="costDetails">
                            por noche
                        </div>
                    </td>
                    <td class="selectColumn">
                        <input class="RoomsSelectRoom" type="submit" value="@HotelEden.SpanishResources.RoomsSelectRoom" />
                        @*@Html.ActionLink(HotelEden.SpanishResources.RoomsSelectRoom, "Reserve", "Rooms", new { room=item.URL },null)*@
                    </td>
                </tr>
                <tr class="roomListItemBreak">
                    <td colspan="4">
                        <hr />
                    </td>
                </tr>
            }
        }

    </table>
</div>